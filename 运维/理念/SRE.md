---
title: 做一个SRE
tags: 运维,SRE
grammar_cjkRuby: true
---


# 《SRE Google运维解密》笔记
## 第1章 介绍

### 系统管理员模式

传统模式的弊端：

 1. **直接成本**：随着系统规模的扩展，运维团队的规模不断扩大，团队大小与系统负载线性相关；
 2. **间接成本**：Dev/Ops团队之间的产生难以计算的间接成本。

运维与开发之间的的矛盾源于最终追求目标的差异，运维追求“稳定”，而开发渴望“变更”（尽管并非源于初衷）。

![运维与开发的核心矛盾](./images/运维与开发的核心矛盾_1.png)

运维团队会设置**检查清单**，要求更新的系统逐一检查模拟；
开发团队声明不再进行更新，而采用增量或补丁方式发布，目的就是绕过**检查清单**。

> 备注：我们可以理解SRE是DevOps的一种实践形式。

### SRE方法论

SRE的核心职责：

 - 可用性改进
 - 延迟优化
 - 性能优化
 - 效率优化
 - 变更管理
 - 监控
 - 紧急事务处理
 - 容量规划与管理

以以上内容为核心，制定完整沟通准则和行为规范，定义如何操作环境，如何与产品、开发、测试以及最终用户进行有效沟通。

#### 确保长期关注研发工作
***50%原则：控制运维工作在50%以内。***

为实现50%原则，可以采取临时措施，将任务发回研发，知道运维工作可以降低到50%以内。**强调产品部门的认同**，否则不可实现。
预期工作状态：8~12h的轮值过程中，做多处理2个紧急事件，确保有事件处理事件并撰写事故报告。**强调事故事后总结的重要性**，“对事不对人”，总结要求包括：发生、发现、解决的过程，事故的根本原因，预防或者优化的解决方案。事故报告的目的在于今早发现和堵住漏洞。

#### 在保障服务SLO的前提下最大化迭代速度
***错误预算*原则**

任何产品都不可能100%可靠，可靠的定义应该有用户的体验决定，用户可以容忍的不可程度是什么，100%与99.999%对于大多数系统用户而言没有任何差异。

商务与产品的协调，例如当99.99%可靠性，仍旧可以保持用户粘性，那么0.01%就是系统的错误预算，错误预算可以用于新功能的上线等任何事情。

基于此原则，研发与运维团队的目标将趋于一致，在保证SLO的前提下，进行快速的功能迭代。 

#### 监控系统

服务质量和可用性保证的重要手段。重中之重。告警原则上不应发送给人，也不应由人分析处理，仅需要通知用户操作，进行通知。
监控系统的三类输出：

 - **Alert**，用户需要立即执行某种操作；
 - **Ticket**，非紧急，但需要用户执行操作；
 - **Logging**，无需处理，仅供分析使用。

#### 应急事件处理
可靠性是{MTTF}(平均失败时间)和{MTTR}(平均恢复时间)的函数

能使用自动化处理机制的时候尽量自动化，当不可避免人工参与的时候，一定要强调《运维手册》的重要性，必须进行记录。依据运维手册操作的on_call工程师有时更具实用价值。